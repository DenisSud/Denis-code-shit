import random

def longest_subarray_with_sum_k(nums, k):
    sum_to_index = {0: -1}
    sum = 0
    max_len = 0
    end_index = -1

    for i in range(len(nums)):
        sum += nums[i]

        if sum == k:
            max_len = i + 1
            end_index = i

        if sum - k in sum_to_index:
            length = i - sum_to_index[sum - k]
            if length > max_len:
                max_len = length
                end_index = i

        if sum not in sum_to_index:
            sum_to_index[sum] = i

    return nums[end_index - max_len + 1:end_index + 1]

nums = [random.randint(-100, 100) for _ in range(20)]
k = random.randint(-100, 100)

longest_subarray = longest_subarray_with_sum_k(nums, k)

print(f"List of integers: {nums}")
print(f"Sum of subarray: {k}")
print(f"Longest subarray with sum {k}: {longest_subarray}")